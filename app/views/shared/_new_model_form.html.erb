<%= form_for @model do |f|%>
  <%= render "shared/error_messages", object: f.object %>
  <div class="card-body">
    <div class="form-group">
      <label for="name">Model's name</label>
      <%= f.text_field :name, placeholder: "Name...",
        class: "form-control", id: "name", required: true %>
    </div>
    <div class="form-group">
      <label for="description">Model's description</label>
      <%= f.text_area :description, placeholder: "Description...",
      class: "form-control", id: "description", required: true %>
    </div>
    <span class="form-group">
      <label for="image">Model's image</label>
      <%= f.file_field :image, accept: "image/jpeg,image/gif,image/png" %>
    </span>
    <div><img src="" class="model-image mt-3" id="image"></div>
  </div>
  <div class="card-footer">
    <%= f.submit "Submit", class: "btn btn-primary" %>
  </div>
<% end %>
<script type="text/javascript">
	$("#model_image").bind("change", function(){
    	var size_in_megabytes = this.files[0].size/1024/1024;
        if (size_in_megabytes > 1) {
        	alert("Maximum file size is 1MB. Please choose an other file!");
        } else {
          readURL(this);
        }
    });

  function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#image').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
  }
</script>